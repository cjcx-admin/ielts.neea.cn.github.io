function isCapsLockOn(b) {
    var d = b.keyCode || b.which;
    var a = b.shiftKey;
    if (((d >= 65 && d <= 90) && !a) || ((d >= 97 && d <= 122) && a)) {
        return true
    }
    return false
}
function goHome() {
    location.href = "../../../../index.html"
}
function gotoHomepage() {
    if ((new RegExp(".edu.cn")).test(window.location.href.toLowerCase())) {
        window.location.href = "http://www.neea.edu.cn";
        return
    }
    window.location.href = "http://www.neea.cn"
}

function loadNews(b) {
    langPath = "1";
    if (b == "EN") {
        langPath = "0"
    }
    var a = "http://news.neea.cn/IELTS/" + langPath + "/newslist.htm";
    if ((new RegExp(".edu.cn")).test(window.location.href.toLowerCase())) {
        a = "http://news.neea.edu.cn/IELTS/" + langPath + "/newslist.htm"
    }
    $("#iframeNews").attr("src", a)
}

function loadWidgetPage(c, b, a) {
    $.ajax({
        url: b,
        cache: a,
        success: function(d) {
            $(c).html(d)
        }
    })
}

function switchLang(a) {
    $.ajax({
        url: "/switchLang?locale=" + a,
        cache: false,
        dataType: "json",
        success: function(b) {
            if (b == "OK") {
                window.location.reload()
            }
        }
    })
}

function switchLangChangePage(a, b) {
    $.ajax({
        url: "/switchLang?locale=" + a,
        cache: false,
        dataType: "json",
        success: function(c) {
            if (c == "OK") {
                window.location.href = b
            }
        }
    })
}

function sendValidationEmail(a, b) {
    $.ajax({
        type: "POST",
        headers: {
            "X-CSRF-TOKEN": $("meta[name='_csrf']").attr("content")
        },
        dataType: "json",
        url: "../../emailValidator/" + b,
        data: $("#frmValidateEmail").serialize(),
        success: function(c) {
            $("#btnValidationEmail").attr("disabled", false);
            if (a == "cn") {
                showMsgOk("提示信息", "确定", c[0])
            } else {
                showMsgOk("Notice", "OK", c[0])
            }
        }
    })
}

function addToFavorite(b) {
    var a = "http://" + window.location.hostname;
    var c = "80";
    a = a + c;
    if (document.all) {
        window.external.AddFavorite(a, b)
    } else {
        if (window.sidebar) {
            window.sidebar.addPanel(b, a, "")
        } else {
            alert("抱歉，您所使用的浏览器无法完成此操作。\n\n加入收藏失败，请使用Ctrl+D进行添加")
        }
    }
    return false
}

function isEmail(a) {
    if (a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/) != -1) {
        return true
    } else {
        return false
    }
}

function getCheckImage(c, b) {
    if (!c) {
        setChangeChkImgMsg(true, b)
    }
    var a = app_url + "checkImage";
    $.getJSON(a, null, function(e) {
        if (e == null) {
            originalRequest.request.options.onFailure();
            return
        }
        var d = new Image();
        d.onerror = function() {
            setChangeChkImgMsg(false, b)
        };
        d.src = e.chkImgFilename;
        if ($.browser.msie) {
            d.onreadystatechange = function() {
                if (d.readyState == "complete") {
                    $("#chkImg").attr("src", e.chkImgFilename);
                    if (!c) {
                        setChangeChkImgMsg(true, b)
                    }
                    d = null
                }
            }
        } else {
            d.onload = function() {
                if (d.complete == true) {
                    $("#chkImg").attr("src", e.chkImgFilename);
                    if (!c) {
                        setChangeChkImgMsg(true, b)
                    }
                    d = null
                }
            }
        }
    })
}

function setChangeChkImgMsg(b, c) {
    if (b) {
        if (c == "CN") {
            $("#changeMsg").html("看不清？点击图片换一张")
        } else {
            $("#changeMsg").html("Click picture to change one")
        }
    } else {
        var a;
        if (c == "CN") {
            a = "<a href='javascript:void(0)' onclick=\"getCheckImage(false,'CN');\">请点击刷新</a>"
        } else {
            a = "<a href='javascript:void(0)' onclick=\"getCheckImage(false,'GB');\">Please click the refresh</a>"
        }
        $("#changeMsg").html(a);
        $("#chkImg").attr("src", "")
    }
}

function inputClick(a) {
    $("#divCheckImage").show();
    getCheckImage(false, a);
    $("#securityCode").unbind("click")
}

function initCheckImage(a) {
    $("#divCheckImage").hide();
    $("#securityCode").val("");
    $("#securityCode").focus(function() {
        if ($("#divCheckImage").is(":hidden")) {
            inputClick(a)
        }
    });
    $("#chkImg").click(function() {
        getCheckImage(false, a)
    })
}

function buildURL(e, f) {
    var b = window.location.hostname;
    var d = "443";
    var g = "80";
    var a = ":";
    if (e == "https") {
        a += d
    } else {
        a += g
    }
    window.location.prototype = e;
    var c = e + "://" + b + a + f;
    return c
}

function gotoProgramHomePage(f, i, b) {
    var e = window.location.hostname;
    var c = "443";
    var g = "80";
    var d = ":";
    if (f == "https") {
        d += c
    } else {
        d += g
    }
    window.location.prototype = f;
    var h = app_url;
    if (b == 2) {
        h = h + i
    } else {
        if (b == 3) {
            h = window.location.pathname + i
        } else {
            if (b == 4) {
                h = window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/") + 1) + i
            }
        }
    }
    var a = f + "://" + e + d + h;
    window.location.href = a
}

function gotoProgramHomePageHtml(g, k, b) {
    var f = window.location.hostname;
    var c = "443";
    var h = "80";
    var d = ":";
    if (g == "https") {
        d += c
    } else {
        d += h
    }
    window.location.prototype = g;
    var e = window.document.location.pathname;
    var j = e.substring(0, e.substr(1).indexOf("/") + 2);
    var i = j;
    if (b == 2) {
        i = i + k
    } else {
        if (b == 3) {
            i = window.location.pathname + k
        }
    }
    var a = g + "://" + f + d + i;
    window.location.href = a
}

function appendErrorMsg(b, a) {
    $("#" + b + "ErrorMsg").empty().append(a)
}

function changePage(a, c) {
    var b = a.replace("#!/", "");
    if (c) {
        if (location.hash == a) {
            loadPage(b);
            return
        }
        location.hash = a
    }
    $(window).hashchange({
        hash: a,
        onSet: function() {
            loadPage(b)
        },
        onRemove: function() {}
    })
}

function loadingPage(a) {
    var b = layer.load(3);
    if ($.isFunction(a)) {
        a();
        layer.close(b)
    } else {
        setTimeout(function() {
            layer.close(b)
        }, 2000)
    }
}

function beginLoading() {
    return layer.load(3)
}

function endLoading(a) {
    layer.close(a)
}

function loadPage(a) {
    // registration?productType=IELTSCDI
    if(a.indexOf('registration') > -1) {
        url = a.split("?")[0] + ".html?" + a.split("?")[1]
    } else {
        url = a + ".html"
    }
    loadingPage(function() {
        $.ajax({
            type: "GET",
            url: url,
            success: function(b) {
                $("#main-content").html(b);
                $(window).scrollTop(0);
                if (a == "homepage") {
                    triggerScrollToFixed("homepage")
                } else {
                    triggerScrollToFixed("index")
                }
            }
        })
    })
}

function triggerScrollToFixedWithResize() {
    $(window).on("resize", function() {
        var a = window.innerWidth * window.devicePixelRatio;
        if (a > 640) {
            if (!$.isScrollToFixed("#indexProfileInfoPanel") && !$("#indexProfileInfoPanel").is(":hidden")) {
                $("#indexProfileInfoPanel").scrollToFixed();
                return
            }
            if (!$.isScrollToFixed("#homePageProfileInfoPanel") && !$("#homePageProfileInfoPanel").is(":hidden")) {
                $("#homePageProfileInfoPanel").scrollToFixed();
                return
            }
        } else {
            if ($.isScrollToFixed("#indexProfileInfoPanel")) {
                $("#indexProfileInfoPanel").trigger("detach.ScrollToFixed");
                return
            }
            if ($.isScrollToFixed("#homePageProfileInfoPanel")) {
                $("#homePageProfileInfoPanel").trigger("detach.ScrollToFixed");
                return
            }
        }
    })
}

function triggerScrollToFixed(b) {
    var a = window.innerWidth * window.devicePixelRatio;
    if (a > 640) {
        if (b == "homepage") {
            if ($.isScrollToFixed("#homePageProfileInfoPanel")) {
                return
            }
            $("#indexProfileInfoPanel").hide();
            $("#indexProfileInfoPanel").trigger("detach.ScrollToFixed");
            $("#homePageProfileInfoPanel").show();
            $("#homePageProfileInfoPanel").scrollToFixed()
        } else {
            if ($.isScrollToFixed("#indexProfileInfoPanel")) {
                return
            }
            $("#homePageProfileInfoPanel").hide();
            $("#homePageProfileInfoPanel").trigger("detach.ScrollToFixed");
            $("#indexProfileInfoPanel").show();
            $("#indexProfileInfoPanel").scrollToFixed()
        }
    } else {
        if (b == "homepage") {
            $("#indexProfileInfoPanel").hide();
            $("#homePageProfileInfoPanel").show();
            if ($.isScrollToFixed("#homePageProfileInfoPanel")) {
                $("#homePageProfileInfoPanel").trigger("detach.ScrollToFixed")
            }
        } else {
            $("#homePageProfileInfoPanel").hide();
            $("#indexProfileInfoPanel").show();
            if ($.isScrollToFixed("#indexProfileInfoPanel")) {
                $("#indexProfileInfoPanel").trigger("detach.ScrollToFixed")
            }
        }
    }
}

function showTipMsg() {
    $(".inputStyle").smallipop({
        preferredPosition: "right",
        theme: "black",
        popupOffset: 5,
        hideDelay: 500,
        invertAnimation: true,
        popupAnimationSpeed: 60,
        triggerOnClick: true
    });
    $(".inputStyle_top").smallipop({
        preferredPosition: "top",
        theme: "black",
        popupOffset: 5,
        hideDelay: 500,
        invertAnimation: true,
        popupAnimationSpeed: 60,
        triggerOnClick: true
    })
}

function formatCurrency(b, a) {
    $("#" + b).text(a / 100);
    $("#" + b).formatCurrency({
        region: "zh-CN"
    })
}

function formatCurrencyVal(b, a) {
    $("#" + b).val(a / 100);
    $("#" + b).formatCurrency({
        region: "zh-CN"
    })
}

function calTotalFee() {
    var c = Number($("#hanFee").val());
    var b;
    if ($("#urgFee").val() == undefined) {
        b = 0
    } else {
        b = Number($("#urgFee").val())
    }
    var d = Number($("#expFee").val());
    if (c == -1 && b == -1 && d == -1) {
        $("#totalFee").val($("#totalFee").val());
        $("#talFee").text($("#totalFee").val());
        $(".moneyTag").formatCurrency({
            region: "zh-CN"
        })
    } else {
        var a = c + b + d;
        $("#totalFee").val(a);
        $("#talFee").text(a);
        $(".moneyTag").formatCurrency({
            region: "zh-CN"
        })
    }
}

function calEmsFee() {
    if ($("#expType option:selected").val() == "EMS") {
        if ("110100" == $("#postCity").val()) {
            $("#expFee").val(14)
        } else {
            $("#expFee").val(22)
        }
        calTotalFee();
        $("#expFeeShow").text($("#expFee").val());
        $(".moneyTag").formatCurrency({
            region: "zh-CN"
        })
    }
}

function PPCCascade(c, b, a, d) {
    var e = '<option value="">- 请选择省份 -</option>';
    if (d == "en") {
        e = '<option value="">- Province -</option>'
    }
    $.each(obj_province, function(f, g) {
        e += '<option value="' + g[0] + '">' + g[1] + "</option>"
    });
    $("#" + c).empty();
    $("#" + c).html(e);
    $("#" + c).change(function() {
        changeCity(c, b, d);
        changeDistrict(b, a, d)
    });
    $("#" + b).change(function() {
        changeDistrict(b, a, d);
        calEmsFee()
    })
}

function changeCity(d, a, e) {
    var f = $("#" + d + " option:selected").val();
    var c = obj_city[f];
    var b = '<option value="">- 请选择城市 -</option>';
    if (e == "en") {
        b = '<option value="">- City -</option>'
    }
    if (!$.isEmptyObject(c)) {
        $.each(c, function(g, h) {
            b += '<option value="' + h.cityCode + '">' + h.cityNameCn + "</option>"
        })
    }
    $("#" + a).empty();
    $("#" + a).html(b)
}

function changeDistrict(b, a, e) {
    var d = $("#" + b + " option:selected").val();
    var f = obj_county[d];
    var c = '<option value="">- 请选择区县 -</option>';
    if (e == "en") {
        c = '<option value="">- Dirstrict -</option>'
    }
    if (!$.isEmptyObject(f)) {
        $.each(f, function(g, h) {
            c += '<option value="' + h.cityCode + '">' + h.cityNameCn + "</option>"
        })
    }
    c += '<option value="999"> - </option>';
    $("#" + a).empty();
    $("#" + a).html(c)
}

function loadAppPage(b, a) {
    loadingPage(function() {
        $.ajax({
            type: "GET",
            url: b + ".html",
            data: {
                neeaAppId: a
            },
            success: function(c) {
                $("#main-content").html(c)
            }
        })
    })
}

function showSurveyLink(b, a) {
    showMsgWarn("提示信息", "跳过问卷调研，继续", '尊敬的考生您好，感谢您参加英国签证及移民类的雅思考试！为更好的提供考试服务，现诚挚邀请您参与英国签证及移民类雅思考试调研，请点击<a href="https://sojump.com/jq/9822341.aspx" target="_blank">链接</a>参与调研。', function() {
        $.ajax({
            type: "GET",
            url: b,
            data: {
                neeaAppId: a
            },
            success: function(c) {
                $("#main-content").html(c)
            }
        })
    })
}

function showRescheduleNotice(a, e, d, c) {
    if (a == "cn") {
        var f = "不同考试（雅思考试-纸笔、雅思考试-机考、用于英国签证及移民的雅思考试-纸笔、用于英国签证及移民的雅思考试-机考、用于英国签证及移民的雅思生活技能类考试）之间无法直接转考。如您需要 报考其他考试，请在报名截止日期之前取消已经注册的考试后重新报考。";
        if (d == "IBT") {
            f = "不同考试（雅思考试-纸笔、雅思考试-机考、用于英国签证及移民的雅思考试-纸笔、用于英国签证及移民的雅思考试-机考、用于英国签证及移民的雅思生活技能类考试）之间无法直接转考。如您需要 报考其他考试，请在报名截止日期之前取消已经注册的考试后重新报考。<br/><br/><span style='color: red;'>如果您已经预定了口语考试日期， 转考后口试预定自动失效。</span>"
        }
        layer.open({
            title: "提示信息",
            btn: ["确定", "取消"],
            closeBtn: 0,
            area: ["500px", "300px"],
            icon: 3,
            content: f,
            btn1: function() {
                layer.closeAll();
                loadAppPage("reschedule?productId=" + e + "&testCode=" + d, c)
            },
            btn2: function() {
                layer.closeAll()
            }
        })
    } else {
        var b = "It is not possible to transfer registrations between different tests (IELTS on paper, IELTS on computer, IELTS UKVI on paper, IELTS UKVI on computer, or IELTS for UKVI Life Skills). If you need to change to another test, please cancel your original registration and make a new registration before the cut-off date.";
        if (d == "IBT") {
            b = "It is not possible to transfer registrations between different tests (IELTS on paper, IELTS on computer, IELTS UKVI on paper, IELTS UKVI on computer, or IELTS for UKVI Life Skills). If you need to change to another test, please cancel your original registration and make a new registration before the cut-off date.<br/><br/><span style='color: red;'>If you have booked your speaking test, your reservation will be invalid once you transfer your test.</span>"
        }
        layer.open({
            title: "Notice",
            btn: ["OK", "Cancel"],
            closeBtn: 0,
            area: ["500px", "350px"],
            icon: 3,
            content: b,
            btn1: function() {
                layer.closeAll();
                loadAppPage("reschedule?productId=" + e + "&testCode=" + d, c)
            },
            btn2: function() {
                layer.closeAll()
            }
        })
    }
}

function setElementSelected(a, b) {
    if (b == "") {
        $("select[name=" + a + "] option[value='']").attr("selected", true)
    } else {
        $("select[name=" + a + "] option[value=" + b + "]").attr("selected", true)
    }
}

function setElementsChecked(a, b) {
    $('input[name="+name+"][value=' + b + "]").attr("checked", "checked")
}

function gotoTop() {
    window.scrollTo(0, 0)
}

function Map() {
    this.elements = new Array();
    this.size = function() {
        return this.elements.length
    };
    this.isEmpty = function() {
        return (this.elements.length < 1)
    };
    this.clear = function() {
        this.elements = new Array()
    };
    this.put = function(b, a) {
        this.elements.push({
            key: b,
            value: a
        })
    };
    this.remove = function(b) {
        var d = false;
        try {
            for (var a = 0; a < this.elements.length; a++) {
                if (this.elements[a].key == b) {
                    this.elements.splice(a, 1);
                    return true
                }
            }
        } catch (c) {
            d = false
        }
        return d
    };
    this.get = function(b) {
        try {
            for (var a = 0; a < this.elements.length; a++) {
                if (this.elements[a].key == b) {
                    return this.elements[a].value
                }
            }
        } catch (c) {
            return null
        }
    };
    this.element = function(a) {
        if (a < 0 || a >= this.elements.length) {
            return null
        }
        return this.elements[a]
    };
    this.containsKey = function(b) {
        var d = false;
        try {
            for (var a = 0; a < this.elements.length; a++) {
                if (this.elements[a].key == b) {
                    d = true
                }
            }
        } catch (c) {
            d = false
        }
        return d
    };
    this.containsValue = function(a) {
        var d = false;
        try {
            for (var b = 0; b < this.elements.length; b++) {
                if (this.elements[b].value == a) {
                    d = true
                }
            }
        } catch (c) {
            d = false
        }
        return d
    };
    this.values = function() {
        var a = new Array();
        for (var b = 0; b < this.elements.length; b++) {
            a.push(this.elements[b].value)
        }
        return a
    };
    this.keys = function() {
        var a = new Array();
        for (var b = 0; b < this.elements.length; b++) {
            a.push(this.elements[b].key)
        }
        return a
    }
}

function checkDateCN(b) {
    var a = b.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);
    if (a == null) {
        return false
    } else {
        var c = new Date(a[1], a[3] - 1, a[4]);
        return (c.getFullYear() == a[1] && (c.getMonth() + 1) == a[3] && c.getDate() == a[4])
    }
}

function checkDateEN(b) {
    var a = b.match(/^(\d{1,2})\/(\d{1,2})\/(\d{1,4})$/);
    if (a == null) {
        return false
    } else {
        var c = new Date(a[3], a[1] - 1, a[2]);
        return (c.getFullYear() == a[3] && (c.getMonth() + 1) == a[1] && c.getDate() == a[2])
    }
}

function isDigit(a) {
    puredigit = new RegExp("[^0-9]");
    return !puredigit.test($(a).val())
}

function isDigitVal(a) {
    puredigit = new RegExp("[^0-9]");
    return !puredigit.test(a)
}
String.prototype.Trim = function() {
    return this.replace(/(^\s*)|(\s*$)/g, "")
};
String.prototype.startWith = function(b) {
    var a = new RegExp("^" + b);
    return a.test(this)
};
String.prototype.endWith = function(b) {
    var a = new RegExp(b + "$");
    return a.test(this)
};
var bankUniteCodeObj;

function bankNameBuild(b, c) {
    var a = '<option value="">- 请选择银行 -</option>';
    if (c == "en") {
        a = '<option value="">- Bank Name -</option>'
    }
    $("#" + b).empty();
    $("#" + b).append(a);
    $.each(bankUniteCodeObj, function(d, f) {
        var e = $("<option></option>");
        $(e).attr("value", f.bankName);
        $(e).text(f.bankName);
        $("#" + b).append(e)
    });
    $("#" + b).append($("<option value='其他'>其他</option>"))
}
Date.prototype.age = function(a) {
    var b;
    var c = this.getYear();
    var d = this.getMonth() + 1;
    var i = this.getDate();
    var k = a.getYear();
    var e = a.getMonth();
    var j = a.getDate();
    if (c == k) {
        b = 0
    } else {
        var g = c - k;
        if (g > 0) {
            if (d == e) {
                var f = i - j;
                if (f < 0) {
                    b = g - 1
                } else {
                    b = g
                }
            } else {
                var h = d - e;
                if (h < 0) {
                    b = g - 1
                } else {
                    b = g
                }
            }
        } else {
            b = -1
        }
    }
    return b
};

function openAT(a, c, b) {
    if (c != "Adult") {
        if (a == "cn") {
            layer.open({
                title: "18岁以下考生特别提醒",
                btn: "确定",
                closeBtn: 0,
                icon: 0,
                area: ["500px", "400x"],
                content: "英国文化教育协会致力于通过遵守英国和中国儿童保护法律，并遵守1989年颁布的《联合国儿童权利公约》第19条有关规定，实现保护儿童的目标。考试当天请您注意以下事项：<br/><ul><li>考试当天入场时，我们将为您发放儿童保护徽章，请您在口试和笔试当天全程佩戴；</li><li>口语考试过程中，负责儿童保护的工作人员将不定期观察口试房间的情况；</li></ul><br/>11岁以下考生不得自行离开考点，考试结束后必须由父母或者监护人陪同方可离开。<br/>如果您在考试过程中有任何关于儿童保护的问题，请在离开考点前联系雅思考务人员。您也可以发送电子邮件至childprotection@britishcouncil.org.cn反馈关于未成年人保护的问题。",
                btn1: function() {
                    layer.closeAll();
                    window.open(b)
                }
            })
        } else {
            layer.open({
                title: "Notice for Under-18 Candidates",
                btn: "OK",
                closeBtn: 0,
                icon: 0,
                area: ["500px", "400x"],
                content: "The British Council aims to protect children through compliance with the relevant laws on Child Protection in the UK and in China. We also adhere to Article 19 of the United Nations Convention on the Rights of the Child (UNCRC) 1989. For candidates under the age of 18 on the test day, please note that:<br/><ul><li>You will be given a Child Protection badge upon entry to the test venue. Please wear it throughout the whole exam (including the Speaking test).</li><li>During the Speaking test, the Child Protection staff on duty shall observe a randomly-chosen part of the test from outside the test room.</li></ul><br/>Candidate under the age of 11 will not be allowed to leave the exam premises at the end of the examination without parents or legal guardians being present at the exam venue.<br/>Should you have any concern regarding Child Protection during the test, please contact the IELTS test day personnel before you leave the test venue. You can also contact us via our email childprotection@britishcouncil.org.cn.",
                btn1: function() {
                    layer.closeAll();
                    window.open(b)
                }
            })
        }
    } else {
        window.open(b)
    }
}

function setCountdown(b, a, e, f, d, c) {
    clearTimeout(timeout);
    if (c == 0) {
        b.removeAttribute("disabled");
        a.innerHTML = "";
        return
    } else {
        b.setAttribute("disabled", "disabled");
        a.innerHTML = e + '<span style="color:red;">' + c + f + "</span>" + d;
        c--
    }
    timeout = setTimeout(function() {
        setCountdown(b, a, e, f, d, c)
    }, 1000)
}

function queryCenterProvinceCity(b, c, a) {
    $.getJSON("getTestCenterProvinceCity", {
        productCode: c
    }, function(d) {
        $.each(d, function(e, f) {
            var g = $("<optgroup>");
            if (a == "cn") {
                g.attr("label", f.provinceNameCn)
            } else {
                g.attr("label", f.provinceNameEn)
            }
            $.each(f.cities, function(j, i) {
                var h = $("<option>");
                h.val(i.cityCode);
                if (a == "cn") {
                    h.text(i.cityNameCn)
                } else {
                    h.text(i.cityNameEn)
                }
                g.append(h)
            });
            $("#" + b).append(g)
        })
    })
}

function queryTestDayByCity(a, c, b) {
    $.getJSON("/getTestDayByCity", {
        productCode: c,
        cityCode: b
    }, function(d) {
        $.each(d, function(e, f) {
            var g = $("<optgroup>");
            g.attr("label", f.provinceNameCn);
            $.each(f.cities, function(j, i) {
                var h = $("<option>");
                h.val(i.cityCode);
                h.text(i.cityNameCn);
                g.append(h)
            });
            $("#" + a).append(g)
        })
    })
}

function initDateOfBirth(b, c) {
    var a = "yyyy-mm-dd";
    if (c == "en") {
        a = "mm/dd/yyyy"
    }
    $("#" + b).datetimepicker({
        format: a,
        language: c,
        minView: "month",
        startView: 3,
        startDate: "1900-01-01",
        forceParse: false,
        endDate: new Date(),
        initialDate: new Date(new Date().getTime() - 1000 * 60 * 60 * 24 * 365 * 35),
        autoclose: true
    }).on("changeDate", function(d) {
        $("#" + b + "ErrorMsg").empty()
    });
    $("#datetimeIcon").click(function() {
        $("#" + b).datetimepicker("show")
    });
    $("#" + b).click(function() {
        $("#" + b).datetimepicker("show")
    })
}

function queryTestSeat(d, c, b, a) {
    $("#productCode").val(d);
    $("#queryCity").val(c);
    $("#queryTestDate").val(b);
    $.ajax({
        type: "POST",
        headers: {
            "X-CSRF-TOKEN": $("meta[name='_csrf']").attr("content")
        },
        dataType: "json",
        url: "queryTestSeats",
        data: $("#frmQuerySeat").serialize(),
        success: function(g) {
            if (g.testDay == undefined) {
                if (a == "cn") {
                    showMsgError("提示信息", ["确定"], "未查询到考位信息")
                } else {
                    showMsgError("Notice", ["OK"], "No seats information is queried")
                }
                return
            }
            var e = $.templates("#myTmpl");
            var f = e.render(g);
            $("#testSeatDetailSection").html(f);
            $("#testSeatTab button").on("click", function(i) {
                var h = $(this).data("key");
                $("#testSeatTabContent .tab-pane").each(function(j, k) {
                    if (h == $(k).data("time")) {
                        $(k).addClass("active")
                    } else {
                        $(k).removeClass("active")
                    }
                })
            });
            $("#testSeatTab button:first").addClass("active");
            $("#testSeatTabContent .tab-pane:first").addClass("active");
            $("#testSeatTabContent .tab-pane img").tooltip({
                placement: "bottom"
            });
            $("#testSeatTabContent .tab-pane button").tooltip({
                placement: "bottom"
            });
            $("#btnBack").on("click", function() {
                $("#querySeatSection").show();
                $("#querySeatSectionFlow").show();
                $("#testSeatInfoSection").hide();
                $("#testSeatInfoSectionFlow").hide()
            });
            $("#querySeatSection").hide();
            $("#querySeatSectionFlow").hide();
            $("#testSeatInfoSection").show();
            $("#testSeatInfoSectionFlow").show()
        }
    })
}

function setTimeCountdown(a, d, c, b) {
    clearTimeout(timeout);
    if (b == 0) {
        a.removeAttribute("disabled");
        a.value = d;
        return
    } else {
        a.setAttribute("disabled", "disabled");
        a.value = b + c;
        b--
    }
    timeout = setTimeout(function() {
        setTimeCountdown(a, d, c, b)
    }, 1000)
}

function checkMobileVerify(b) {
    if (b == "") {
        return false
    } else {
        if (b.length != 6) {
            return false
        } else {
            var a = /^[0-9]+$/;
            return a.test(b)
        }
    }
    return true
}

function checkNewMobile(b, a) {
    if (b == "") {
        return false
    } else {
        if (b.length != 11) {
            return false
        } else {
            if (b == a) {
                return false
            } else {
                var c = /^[0-9]+$/;
                return c.test(b)
            }
        }
    }
}

function checkEmailVerifyCodeValid(b) {
    if (b == "") {
        return false
    } else {
        if (b.length != 4) {
            return false
        } else {
            var a = /^[A-Za-z0-9]+$/;
            return a.test(b)
        }
    }
    return true
}

function checkNewMobileValid(b, a) {
    if (b == "") {
        return false
    } else {
        if (b == a) {
            return false
        }
        if (b.length != 11) {
            return false
        } else {
            var c = new RegExp("[^0-9]");
            return !c.test(b)
        }
    }
    return true
}

function checkNewEmailValid(a, b) {
    if (a == "") {
        return false
    } else {
        if (a == b) {
            return false
        }
        if (!isEmail(a)) {
            return false
        }
    }
    return true
}

function showReminderInAppointment(a, b, c) {
    if (a == "cn") {
        layer.open({
            type: 1,
            title: "提示信息",
            btn: ["确定", "取消"],
            closeBtn: 0,
            icon: 0,
            scrollbar: false,
            content: $("#dialogReminder").html(),
            area: ["60%", "60%"],
            btn1: function(d) {
                if ($('input[name="agreementPrevention"]:checked').val() == undefined) {
                    layer.open({
                        title: "提示信息",
                        btn: "确定",
                        closeBtn: 0,
                        icon: 0,
                        content: "您必须确认已阅读并知晓以上疫情防疫须知",
                        btn1: function(e) {
                            layer.close(e);
                            $("#agreementPrevention").focus()
                        }
                    });
                    return
                } else {
                    layer.closeAll();
                    openAT(a, b, c)
                }
            },
            btn2: function() {
                layer.closeAll()
            }
        })
    } else {
        layer.open({
            type: 1,
            title: "Notice",
            btn: ["OK", "Cancel"],
            closeBtn: 0,
            icon: 0,
            scrollbar: false,
            content: $("#dialogReminder").html(),
            area: ["70%", "70%"],
            btn1: function(d) {
                if ($('input[name="agreementPrevention"]:checked').val() == undefined) {
                    layer.open({
                        title: "Notice",
                        btn: "OK",
                        closeBtn: 0,
                        icon: 0,
                        content: "Please certify to read and agree the notice above",
                        btn1: function(e) {
                            layer.close(e);
                            $("#agreementPrevention").focus()
                        }
                    });
                    return
                } else {
                    layer.closeAll();
                    openAT(a, b, c)
                }
            },
            btn2: function() {
                layer.closeAll()
            }
        })
    }
}

function showHmNationalIdTypeModify() {
    $.ajax({
        type: "GET",
        url: "showHmNationalTypeModify",
        success: function(a) {
            $("#main-content").html(a);
            $(window).scrollTop(0)
        }
    })
};